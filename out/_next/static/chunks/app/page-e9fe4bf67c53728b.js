(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{750:(e,s,a)=>{Promise.resolve().then(a.bind(a,5577))},5577:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ek});var t=a(5155),r=a(2115),o=a(5452),l=a(5318),n=a(2596),i=a(9688);function d(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,i.QP)((0,n.$)(s))}let c=o.bL;o.l9;let m=o.ZL,u=o.bm,x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.hJ,{ref:s,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});x.displayName=o.hJ.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(m,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(o.UC,{ref:s,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,t.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=o.UC.displayName;let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};h.displayName="DialogHeader";let p=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};p.displayName="DialogFooter";let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.hE,{ref:s,className:d("text-lg font-semibold leading-none tracking-tight",a),...r})});g.displayName=o.hE.displayName;let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.VY,{ref:s,className:d("text-sm text-muted-foreground",a),...r})});j.displayName=o.VY.displayName;var b=a(9708),v=a(2085);let N=(0,v.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),y=r.forwardRef((e,s)=>{let{className:a,variant:r,size:o,asChild:l=!1,...n}=e,i=l?b.DX:"button";return(0,t.jsx)(i,{className:d(N({variant:r,size:o,className:a})),ref:s,...n})});y.displayName="Button";let w=r.forwardRef((e,s)=>{let{className:a,type:r,...o}=e;return(0,t.jsx)("input",{type:r,className:d("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...o})});w.displayName="Input";class S extends Error{constructor(e,s){super(s),this.status=e,this.name="ApiError"}}async function C(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{requireAuth:a=!0,headers:t={},...r}=s,o={"Content-Type":"application/json",...t};if(a){let e=localStorage.getItem("token");e&&(o.Authorization="Bearer ".concat(e))}try{let s,a=await fetch(e,{...r,headers:o}),t=await a.json();if(!a.ok){401===a.status&&(console.warn("Unauthorized — clearing credentials and reloading"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload());let e="object"==typeof t&&null!==t&&"error"in t&&"string"==typeof t.error?t.error:a.statusText;throw new S(a.status,e)}return s="object"==typeof t&&null!==t&&"data"in t?t.data:t,{success:!0,data:s,message:"object"==typeof t&&null!==t&&"message"in t?t.message:void 0}}catch(e){if(console.error("API Request Error:",e),e instanceof S)return{success:!1,error:e.message};return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}let k={get:(e,s)=>C(e,{...s,method:"GET"}),post:(e,s,a)=>C(e,{...a,method:"POST",body:void 0!==s?JSON.stringify(s):void 0}),put:(e,s,a)=>C(e,{...a,method:"PUT",body:void 0!==s?JSON.stringify(s):void 0})};var _=a(6671);function R(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2?arguments[2]:void 0,{description:t,duration:r=4e3,action:o}=a||{},l={description:t,duration:r,action:o?{label:o.label,onClick:o.onClick}:void 0};switch(s){case"success":return _.oR.success(e,l);case"error":return _.oR.error(e,l);case"warning":return _.oR.warning(e,l);default:return _.oR.info(e,l)}}let A={success:(e,s)=>R(e,"success",s),error:(e,s)=>R(e,"error",s)};function E(e){let{isOpen:s,onClose:a}=e,[o,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(""),[p,j]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[N,S]=(0,r.useState)(""),[C,_]=(0,r.useState)(""),[R,E]=(0,r.useState)(""),I=()=>{i(!0),setTimeout(()=>{l(!o),i(!1)},150)},z=async e=>{e.preventDefault(),m(!0),setTimeout(async()=>{if(u&&p){let e=await k.post("/api/auth/login",{email:u,password:p});if(!e.success||!e.data){A.error(e.error||"Login failed"),m(!1);return}let s=e.data.access_token,t=await k.get("/api/users",{headers:{Authorization:"Bearer ".concat(s)},requireAuth:!1});if(!t.success||!t.data){A.error(t.error||"Failed to fetch user data"),m(!1);return}let r={id:t.data.user._id,name:t.data.user.username,email:t.data.user.email,avatar:t.data.user.profile_picture,ai_room:t.data.user.ai_room};localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(r)),A.success("Login successful!"),a(),window.location.reload()}else A.error("Please enter email and password");m(!1)},1e3)},F=async e=>{if(e.preventDefault(),N!==C)return void A.error("Passwords do not match");m(!0),setTimeout(async()=>{let e=await k.post("/api/auth/register",{email:b,username:R,password:N});if(!e.success||!e.data){A.error(e.error||"Failed to register"),m(!1);return}let s=e.data.access_token,t=await k.get("/api/users",{headers:{Authorization:"Bearer ".concat(s)},requireAuth:!1});if(!t.success||!t.data){A.error(t.error||"Failed to fetch user data"),m(!1);return}let r={id:t.data.user._id,name:t.data.user.username,email:t.data.user.email,avatar:t.data.user.profile_picture,ai_room:t.data.user.ai_room};localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(r)),A.success("Registration successful!"),a(),window.location.reload(),m(!1)},1e3)};return(0,t.jsx)(c,{open:s,onOpenChange:()=>{},children:(0,t.jsxs)(f,{className:"sm:max-w-md bg-card border-border text-foreground",children:[(0,t.jsx)(h,{children:(0,t.jsx)(g,{className:"sr-only",children:"Authentication"})}),(0,t.jsxs)("div",{className:"relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"transition-all duration-300 ease-in-out ".concat(o&&!n?"opacity-100 transform translate-x-0":"opacity-0 transform -translate-x-full absolute inset-0"),children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Welcome back"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Sign in to your account"})]}),(0,t.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(w,{type:"email",placeholder:"Email",value:u,onChange:e=>x(e.target.value),required:!0,className:"bg-secondary border-border"})}),(0,t.jsx)("div",{children:(0,t.jsx)(w,{type:"password",placeholder:"Password",value:p,onChange:e=>j(e.target.value),required:!0,className:"bg-secondary border-border"})}),(0,t.jsx)(y,{type:"submit",className:"w-full",disabled:d,children:d?"Signing in...":"Sign in"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-muted-foreground",children:["New here?"," ",(0,t.jsx)("button",{type:"button",onClick:I,className:"text-primary hover:underline",disabled:d,children:"Register here"})]})})]}),(0,t.jsxs)("div",{className:"transition-all duration-300 ease-in-out ".concat(o||n?"opacity-0 transform translate-x-full absolute inset-0":"opacity-100 transform translate-x-0"),children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Create account"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Join our community today"})]}),(0,t.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(w,{type:"text",placeholder:"Username",value:R,onChange:e=>E(e.target.value),required:!0,className:"bg-secondary border-border"})}),(0,t.jsx)("div",{children:(0,t.jsx)(w,{type:"email",placeholder:"Email",value:b,onChange:e=>v(e.target.value),required:!0,className:"bg-secondary border-border"})}),(0,t.jsx)("div",{children:(0,t.jsx)(w,{type:"password",placeholder:"Password",value:N,onChange:e=>S(e.target.value),required:!0,className:"bg-secondary border-border"})}),(0,t.jsx)("div",{children:(0,t.jsx)(w,{type:"password",placeholder:"Confirm password",value:C,onChange:e=>_(e.target.value),required:!0,className:"bg-secondary border-border"})}),(0,t.jsx)(y,{type:"submit",className:"w-full",disabled:d,children:d?"Creating account...":"Create account"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Already have an account?"," ",(0,t.jsx)("button",{type:"button",onClick:I,className:"text-primary hover:underline",disabled:d,children:"Sign in here"})]})})]})]})]})})}var I=a(4011);let z=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(I.bL,{ref:s,className:d("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});z.displayName=I.bL.displayName;let F=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(I._V,{ref:s,className:d("aspect-square h-full w-full",a),...r})});F.displayName=I._V.displayName;let P=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(I.H4,{ref:s,className:d("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});P.displayName=I.H4.displayName;var O=a(968);let L=(0,v.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),D=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(O.b,{ref:s,className:d(L(),a),...r})});D.displayName=O.b.displayName;var T=a(9311),U=a(9637),J=a(5943),q=a(1573);function V(e){let{isOpen:s,onClose:a}=e,[o,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[p,j]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[R,E]=(0,r.useState)(!1),[I,O]=(0,r.useState)({name:"",email:"",avatar:"default"}),[L,V]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(s){let e=localStorage.getItem("user");if(e){let s=JSON.parse(e);l(s),i(s.name||""),j(s.email||""),v(s.avatar||"default"),O({name:s.name||"",email:s.email||"",avatar:s.avatar||"default"}),_(!1),E(!1),m(""),x(""),V(!1)}}},[s]);let B=async()=>{if(S(!0),R&&d==u){A.error("Old password should not match new password."),S(!1);return}setTimeout(async()=>{try{let e=await k.put("/api/users",{email:C?p:null,old_password:R?d:null,new_password:R?u:null,pfp:L?b:null});if(e.success){A.success("Settings updated successfully!");let e={...o,name:n,email:p,avatar:b};localStorage.setItem("user",JSON.stringify(e)),S(!1),a(),window.location.reload()}else A.error(e.error||"Failed to update user settings"),S(!1),a()}catch(e){A.error("Failed to update user settings")}},1e3)},K=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="";for(let a=0;a<16;a++)s+=e.charAt(Math.floor(Math.random()*e.length));return s},M=n!==I.name||p!==I.email||b!==I.avatar||L||R&&d&&u;return(0,t.jsx)(c,{open:s,onOpenChange:a,children:(0,t.jsxs)(f,{className:"sm:max-w-xs bg-card border-border text-foreground p-4",children:[(0,t.jsx)(h,{children:(0,t.jsxs)(g,{className:"text-lg font-semibold",children:["Settings for ",n]})}),(0,t.jsxs)("div",{className:"space-y-3 py-2",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsxs)(z,{className:"h-14 w-14",children:[(0,t.jsx)(F,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(b)}),(0,t.jsx)(P,{className:"bg-secondary text-base",children:n?n.split(" ").map(e=>e[0]).join("").toUpperCase():"U"})]}),(0,t.jsxs)(y,{variant:"outline",size:"sm",onClick:()=>{v(K()),V(!0)},className:"text-xs",children:[(0,t.jsx)(T.A,{className:"mr-2 h-3 w-3"}),"Generate New Avatar"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"space-y-2 relative",children:[(0,t.jsxs)(D,{htmlFor:"email",className:"text-sm font-medium",children:[(0,t.jsx)(U.A,{className:"inline mr-2 h-4 w-4"}),"Email Address"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w,{id:"email",type:"email",placeholder:"your.email@example.com",value:p,onChange:e=>j(e.target.value),className:"bg-secondary border-border pr-9",disabled:!C,autoComplete:"off"}),(0,t.jsx)("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-muted transition",onClick:()=>_(e=>!e),tabIndex:-1,"aria-label":"Edit Email",children:(0,t.jsx)(J.A,{className:"h-4 w-4 text-muted-foreground"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2 relative",children:[(0,t.jsxs)(D,{htmlFor:"password",className:"text-sm font-medium",children:[(0,t.jsx)(q.A,{className:"inline mr-2 h-4 w-4"}),"Password"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w,{id:"oldPassword",type:"password",placeholder:"Your old password",value:d,onChange:e=>m(e.target.value),className:"bg-secondary border-border pr-9",disabled:!R,autoComplete:"off"}),(0,t.jsx)("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-muted transition",onClick:()=>E(e=>!e),tabIndex:-1,"aria-label":"Edit Password",children:(0,t.jsx)(J.A,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,t.jsx)("div",{className:"flex items-center mt-2",children:(0,t.jsx)(w,{id:"newPassword",type:"password",placeholder:"Your new password",value:u,onChange:e=>x(e.target.value),className:"bg-secondary border-border flex-1",disabled:!R,autoComplete:"off"})})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,t.jsx)(y,{onClick:B,disabled:N||!M||!n.trim()||!p.trim(),className:"flex-1 ".concat(!M||N?"opacity-60 cursor-not-allowed":""),children:N?"Saving...":"Save Changes"}),(0,t.jsx)(y,{variant:"outline",onClick:a,disabled:N,children:"Cancel"})]})]})]})})}var B=a(1853),K=a(3158),M=a(518),Y=a(154);let G=B.bL,Z=B.l9;B.YJ,B.ZL,B.Pb,B.z6,r.forwardRef((e,s)=>{let{className:a,inset:r,children:o,...l}=e;return(0,t.jsxs)(B.ZP,{ref:s,className:d("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l,children:[o,(0,t.jsx)(K.A,{className:"ml-auto"})]})}).displayName=B.ZP.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.G5,{ref:s,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...r})}).displayName=B.G5.displayName;let H=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...o}=e;return(0,t.jsx)(B.ZL,{children:(0,t.jsx)(B.UC,{ref:s,sideOffset:r,className:d("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...o})})});H.displayName=B.UC.displayName;let W=r.forwardRef((e,s)=>{let{className:a,inset:r,...o}=e;return(0,t.jsx)(B.q7,{ref:s,className:d("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",a),...o})});W.displayName=B.q7.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:o,...l}=e;return(0,t.jsxs)(B.H_,{ref:s,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(B.VF,{children:(0,t.jsx)(M.A,{className:"h-4 w-4"})})}),r]})}).displayName=B.H_.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,...o}=e;return(0,t.jsxs)(B.hN,{ref:s,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(B.VF,{children:(0,t.jsx)(Y.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=B.hN.displayName,r.forwardRef((e,s)=>{let{className:a,inset:r,...o}=e;return(0,t.jsx)(B.JU,{ref:s,className:d("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...o})}).displayName=B.JU.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(B.wv,{ref:s,className:d("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=B.wv.displayName;var Q=a(7489);let X=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:o=!0,...l}=e;return(0,t.jsx)(Q.b,{ref:s,decorative:o,orientation:r,className:d("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...l})});X.displayName=Q.b.displayName;var $=a(8271),ee=a(3349),es=a(8046),ea=a(3896),et=a(7679),er=a(3503),eo=a(3561),el=a(7390),en=a(5222),ei=a(320),ed=a(286);function ec(e){let{selectedRoom:s,onRoomSelect:a,onSettingsClick:o}=e,[l,n]=(0,r.useState)(null),[i,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(null),[x,p]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[R,E]=(0,r.useState)(null),[I,O]=(0,r.useState)(""),[L,D]=(0,r.useState)(""),[T,U]=(0,r.useState)(""),[J,q]=(0,r.useState)(""),[V,B]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("user");e&&n(JSON.parse(e)),K()},[]);let K=async()=>{try{let s=await k.get("/api/rooms",{requireAuth:!0});if(s.success&&s.data){var e;let a=s.data.rooms||[],t=null!=(e=a.find(e=>e.is_ai))?e:null,r=a.filter(e=>!e.is_ai);u(t),d(r)}else A.error(s.error||"Failed to fetch rooms")}catch(e){e instanceof S&&401===e.status?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload()):A.error("Failed to fetch rooms")}},M=async()=>{if(I.trim())try{let e=await k.post("/api/rooms/create",{room_name:I,room_picture:L||null});e.success?(A.success("Room created successfully!"),O(""),p(!1),K()):A.error(e.error||"Failed to create room")}catch(e){A.error("Failed to create room")}},Y=async()=>{if(T.trim())try{let e=await k.get("/api/rooms/join?code=".concat(T));e.success?(A.success("Joined room successfully!"),U(""),b(!1),K()):A.error(e.error||"Failed to join room")}catch(e){A.error("Failed to join room")}},Q=async e=>{try{let t=await k.get("/api/rooms/leave?id=".concat(e));t.success?(A.success("Left room successfully"),K(),s===e&&a("685a64dcd94f6bbc0088f911")):A.error(t.error||"Failed to leave room")}catch(e){A.error("Failed to leave room")}},ec=async()=>{if(R&&J.trim())try{let e=await k.put("/api/rooms/".concat(R._id),{room_name:J,room_picture:V||null});e.success?(A.success("Room updated successfully!"),q(""),_(!1),E(null),K()):A.error(e.error||"Failed to update room")}catch(e){A.error("Failed to update room")}},em=e=>{E(e),N(!0)},eu=e=>{E(e),q(e.room_name),_(!0)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"w-80 bg-card border-r border-border flex flex-col h-screen font-semibold",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(z,{className:"h-10 w-10",children:[(0,t.jsx)(F,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(null==l?void 0:l.avatar)}),(0,t.jsx)(P,{className:"bg-secondary font-semibold",children:(null==l?void 0:l.name)?l.name.split(" ").map(e=>e[0]).join("").toUpperCase():"U"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:null==l?void 0:l.name}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:null==l?void 0:l.email}),(0,t.jsxs)(G,{children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsx)(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,t.jsx)($.A,{className:"h-3 w-3"})})}),(0,t.jsxs)(H,{align:"end",children:[(0,t.jsxs)(W,{onClick:o,children:[(0,t.jsx)($.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,t.jsxs)(W,{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.reload()},className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]})]})]})}),(0,t.jsxs)("div",{className:"p-4 space-y-2",children:[(0,t.jsxs)(y,{onClick:()=>p(!0),className:"create-room-btn w-full justify-start bg-yellow-600 hover:bg-yellow-700 text-white font-semibold",children:[(0,t.jsx)(es.A,{className:"mr-2 h-4 w-4"}),"Create Room"]}),(0,t.jsxs)(y,{onClick:()=>b(!0),className:"join-room-btn w-full justify-start bg-green-600 hover:bg-green-700 text-white font-semibold",children:[(0,t.jsx)(ea.A,{className:"mr-2 h-4 w-4"}),"Join Room"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-4 pt-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Rooms"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>a("685a64dcd94f6bbc0088f911"),className:"room-card w-full flex items-center space-x-3 p-2 rounded-md text-left hover:bg-accent transition-colors ".concat("public"===s?"room-selected":""),children:[(0,t.jsx)(et.A,{className:"h-4 w-4 text-blue-500"}),(0,t.jsx)("span",{className:"text-sm font-medium font-semibold",children:"Public Room"})]}),(0,t.jsxs)("button",{onClick:()=>{var e;return a(null!=(e=null==m?void 0:m._id)?e:"")},className:"room-card w-full flex items-center space-x-3 p-2 rounded-md text-left hover:bg-accent transition-colors ".concat("ai"===s?"room-selected":""),children:[(0,t.jsx)(er.A,{className:"h-4 w-4 text-purple-500"}),(0,t.jsx)("span",{className:"text-sm font-medium font-semibold",children:"AI Room"}),(0,t.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded bg-purple-700 text-white text-[10px] font-semibold uppercase tracking-wide font-semibold",children:"Beta"})]})]}),(0,t.jsx)(X,{className:"my-3"}),(0,t.jsx)("div",{className:"space-y-1",children:i.map(e=>(0,t.jsxs)("div",{className:"room-card w-full p-2 rounded-md hover:bg-accent transition-colors group ".concat(s===e._id?"room-selected":""),onClick:()=>a(e._id),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,t.jsxs)(z,{className:"h-7 w-7",children:[(0,t.jsx)(F,{src:e.room_picture}),(0,t.jsx)(P,{className:"bg-secondary text-xs",children:e.room_name?e.room_name.split(" ").map(e=>e[0]).join("").toUpperCase():"#"})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("p",{className:"text-sm font-medium truncate font-semibold",children:e.room_name})}),(0,t.jsxs)(G,{children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsx)(y,{onClick:e=>e.stopPropagation(),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-100 md:opacity-0 md:group-hover:opacity-100",children:(0,t.jsx)(eo.A,{className:"h-3 w-3"})})}),(0,t.jsxs)(H,{align:"end",children:[(0,t.jsxs)(W,{onClick:e=>e.stopPropagation(),onSelect:()=>em(e),children:[(0,t.jsx)(el.A,{className:"mr-2 h-4 w-4"}),"Share"]}),(null==l?void 0:l.name)===e.owner?(0,t.jsxs)(W,{onClick:e=>e.stopPropagation(),onSelect:()=>eu(e),children:[(0,t.jsx)(en.A,{className:"mr-2 h-4 w-4"}),"Edit"]}):(0,t.jsxs)(W,{onClick:()=>Q(e._id),className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(ei.A,{className:"mr-2 h-4 w-4"}),"Leave"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 mt-1 ml-7",children:[(0,t.jsx)(ed.A,{className:"h-3 w-3 text-muted-foreground"}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.members.length," members"]})]})]},e._id))})]})})]}),(0,t.jsx)(c,{open:x,onOpenChange:p,children:(0,t.jsxs)(f,{children:[(0,t.jsx)(h,{children:(0,t.jsx)(g,{children:"Create New Room"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{placeholder:"Room name",value:I,onChange:e=>O(e.target.value)}),(0,t.jsx)(w,{placeholder:"Room Picture URL (Leave empty for auto-generated)",value:L,onChange:e=>D(e.target.value)}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(y,{onClick:M,disabled:!I.trim(),children:"Create"}),(0,t.jsx)(y,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]})]})}),(0,t.jsx)(c,{open:j,onOpenChange:b,children:(0,t.jsxs)(f,{children:[(0,t.jsx)(h,{children:(0,t.jsx)(g,{children:"Join Room"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{placeholder:"Enter join code",value:T,onChange:e=>U(e.target.value),onKeyDown:e=>"Enter"===e.key&&Y()}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(y,{onClick:Y,disabled:!T.trim(),children:"Join"}),(0,t.jsx)(y,{variant:"outline",onClick:()=>b(!1),children:"Cancel"})]})]})]})}),(0,t.jsx)(c,{open:v,onOpenChange:N,children:(0,t.jsxs)(f,{children:[(0,t.jsx)(h,{children:(0,t.jsx)(g,{children:"Share Room"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{value:(null==R?void 0:R.room_join_code)||"",readOnly:!0,className:"bg-secondary"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Share this code with others to let them join the room."}),(0,t.jsx)(y,{onClick:()=>N(!1),children:"Close"})]})]})}),(0,t.jsx)(c,{open:C,onOpenChange:_,children:(0,t.jsxs)(f,{children:[(0,t.jsx)(h,{children:(0,t.jsx)(g,{children:"Edit Room"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{placeholder:"Room name",value:J,onChange:e=>q(e.target.value),onKeyDown:e=>"Enter"===e.key&&ec()}),(0,t.jsx)(w,{placeholder:"Room picture (optional)",value:V,onChange:e=>B(e.target.value),onKeyDown:e=>"Enter"===e.key&&ec()}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(y,{onClick:ec,disabled:!J.trim(),children:"Update"}),(0,t.jsx)(y,{variant:"outline",onClick:()=>_(!1),children:"Cancel"})]})]})]})})]})}let em=o.bL,eu=o.l9;o.bm;let ex=o.ZL,ef=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.hJ,{className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s})});ef.displayName=o.hJ.displayName;let eh=(0,v.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ep=r.forwardRef((e,s)=>{let{side:a="right",className:r,children:n,...i}=e;return(0,t.jsxs)(ex,{children:[(0,t.jsx)(ef,{}),(0,t.jsxs)(o.UC,{ref:s,className:d(eh({side:a}),r),...i,children:[(0,t.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),n]})]})});ep.displayName=o.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.hE,{ref:s,className:d("text-lg font-semibold text-foreground",a),...r})}).displayName=o.hE.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.VY,{ref:s,className:d("text-sm text-muted-foreground",a),...r})}).displayName=o.VY.displayName;var eg=a(8341);function ej(e){let{selectedRoom:s,onRoomSelect:a,onSettingsClick:o}=e,[l,n]=(0,r.useState)(!1);return(0,t.jsxs)(em,{open:l,onOpenChange:n,children:[(0,t.jsx)(eu,{asChild:!0,children:(0,t.jsx)(y,{variant:"ghost",size:"icon",className:"md:hidden",children:(0,t.jsx)(eg.A,{className:"h-5 w-5"})})}),(0,t.jsx)(ep,{side:"left",className:"p-0 w-80",children:(0,t.jsx)(ec,{selectedRoom:s,onRoomSelect:e=>{a(e),n(!1)},onSettingsClick:()=>{o(),n(!1)}})})]})}var eb=a(3672),ev=a(4298);let eN=null;function ey(e){return eN||(eN=(0,ev.io)("ws://45.12.219.158:5000",{path:"/ws/socket.io/",transports:["websocket"],auth:{token:e}})),eN}function ew(e){let{selectedRoom:s}=e,[a,o]=(0,r.useState)([]),[l,n]=(0,r.useState)(null),[i,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[N,C]=(0,r.useState)(""),_="Generating your response...",[R,E]=(0,r.useState)(0),[I,O]=(0,r.useState)(!1),[L,D]=(0,r.useState)(!1),T=(0,r.useRef)(null),[U,J]=(0,r.useState)(!0),[q,V]=(0,r.useState)(Date.now()),[B,K]=(0,r.useState)(null),[M,Y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=setInterval(()=>V(Date.now()),6e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{if(b){C("");let e=0,s=setInterval(()=>{C(_.slice(0,e+1)),++e===_.length&&clearInterval(s)},40);return()=>clearInterval(s)}C("")},[b]);let G=(0,r.useCallback)(async()=>{if(!s)return;if("685a64dcd94f6bbc0088f911"===s||"ai"===s)return void n("ai"===s?{_id:"ai",room_name:"AI Room",members:0,room_picture:"null",is_ai:!0}:{_id:"685a64dcd94f6bbc0088f911",room_name:"Public Room",members:0,room_picture:"null"});let e=await k.get("/api/rooms/".concat(s));e.success&&e.data&&n(e.data.room)},[s]),Z=(0,r.useCallback)(async()=>{if(!s||"ai"===s)return void o([]);let e=await k.get("/api/rooms/".concat(s,"/messages"));e.success&&e.data&&o(e.data.messages)},[s]);(0,r.useEffect)(()=>{if(!s)return;J(!1),O(!0);let e=setTimeout(async()=>{await G(),await Z(),O(!1),J(!0)},200);return()=>clearTimeout(e)},[s,G,Z]),(0,r.useEffect)(()=>{if(!s)return;let e=ey(localStorage.getItem("token")||"");e.emit("join",{room_uuid:s});let a=e=>{var s;o(s=>[...s,...e]),(null==(s=e[0])?void 0:s.user)==="AI"&&(x(!1),v(!1))},t=e=>{let s;s="string"==typeof e?e:e instanceof S||e instanceof Error?e.message:"object"==typeof e&&null!==e&&"error"in e?e.error:JSON.stringify(e),A.error(s),x(!1),v(!1)};return e.on("message",a),e.on("error",t),()=>{e.off("message",a),e.off("error",t)}},[s]),(0,r.useEffect)(()=>{H()},[a]),(0,r.useEffect)(()=>{if(R>0){let e=setTimeout(()=>E(R-1),1e3);return()=>clearTimeout(e)}},[R]);let H=()=>{var e;null==(e=T.current)||e.scrollIntoView({behavior:"smooth"})},W=async()=>{if(i.trim()&&s&&!m&&!(R>0)){if(i.length>1500)return void A.error("Message is too long. Maximum 1,500 characters allowed.");x(!0),(null==l?void 0:l.is_ai)&&v(!0),d("");try{let e=localStorage.getItem("token")||"";ey(e).emit("message",{room_uuid:s,message:i,...(null==l?void 0:l.is_ai)?{is_ai:!0}:{}}),E(3)}catch(e){A.error("Failed to send message"),d(i)}finally{if(null==l?void 0:l.is_ai)return;x(!1)}}},Q=e=>{let s=new Date(e),a=Math.floor((new Date().getTime()-s.getTime())/6e4),t=Math.floor(a/60),r=Math.floor(t/24);return a<1?"just now":a<60?"".concat(a,"m ago"):t<24?"".concat(t,"h ago"):r<7?"".concat(r,"d ago"):s.toLocaleDateString()},X=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase();return s?(0,t.jsxs)("div",{className:"flex flex-col bg-background h-screen transition-opacity duration-300 ".concat(U?"opacity-100":"opacity-0"),children:[(0,t.jsxs)("div",{className:"chat-header border-b border-border p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:["685a64dcd94f6bbc0088f911"===s?(0,t.jsx)(et.A,{className:"h-5 w-5 text-blue-500"}):(null==l?void 0:l.is_ai)?(0,t.jsx)(er.A,{className:"h-5 w-5 text-purple-500"}):(0,t.jsxs)(z,{className:"h-7 w-7",children:[(0,t.jsx)(F,{src:null==l?void 0:l.room_picture}),(0,t.jsx)(P,{className:"bg-secondary text-xs",children:(null==l?void 0:l.room_name)?l.room_name.split(" ").map(e=>e[0]).join("").toUpperCase():"#"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"font-semibold",children:null==l?void 0:l.room_name})})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:l&&!l.is_ai&&"685a64dcd94f6bbc0088f911"!==l._id&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(ed.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-sm",children:[l.members," members"]})]})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 relative",children:[0===a.length&&(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground text-center max-w-xs",children:(null==l?void 0:l.is_ai)?(0,t.jsxs)(t.Fragment,{children:["This feature is BETA. Please don’t violate the"," ",(0,t.jsx)("button",{className:"underline hover:text-primary text-xs",onClick:()=>Y(!0),type:"button",children:"Terms of Service"}),". AI can make mistakes and may generate incorrect or inappropriate responses."]}):(0,t.jsxs)(t.Fragment,{children:["Keep conversations respectful. Do not share personal information or violate the"," ",(0,t.jsx)("button",{className:"underline hover:text-primary text-xs",onClick:()=>Y(!0),type:"button",children:"Terms of Service"}),"."]})}),(0,t.jsx)(c,{open:M,onOpenChange:Y,children:(0,t.jsxs)(f,{className:"max-w-lg",children:[(0,t.jsxs)(h,{children:[(0,t.jsx)(g,{children:"Terms of Service & Privacy Policy"}),(0,t.jsx)(j,{children:(0,t.jsxs)("div",{className:"text-sm mt-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Terms of Service:"})," By using this chat, you agree to keep conversations respectful and not to share personal or sensitive information. Do not violate any applicable laws or the platform’s rules."]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Privacy Policy:"})," Your messages may be stored for moderation and service improvement. We do not sell your data."]})]})})]}),(0,t.jsx)(p,{children:(0,t.jsx)(u,{asChild:!0,children:(0,t.jsx)(y,{variant:"secondary",children:"Close"})})})]})})]}),a.map(e=>(0,t.jsxs)("div",{className:"flex space-x-3 fade-in-message",children:[(0,t.jsxs)(z,{className:"h-8 w-8 flex-shrink-0",children:["AI"===e.user?(0,t.jsx)("span",{className:"flex items-center justify-center w-full h-full bg-secondary rounded-full",children:(0,t.jsx)(er.A,{className:"h-5 w-5 text-purple-500"})}):(0,t.jsx)(F,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(e.pfp)}),"AI"!==e.user?(0,t.jsx)(P,{className:"bg-secondary text-xs",children:X(e.user)}):null]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.user}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:Q(e.timestamp)})]}),(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-normal break-words",children:e.message})]})]},e._id)),(0,t.jsx)("div",{ref:T})]}),(0,t.jsx)("div",{className:"border-t border-border p-4",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[b?(0,t.jsx)(w,{placeholder:N||"Generating your response...",value:i,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),W())},disabled:m||R>0,className:"bg-secondary border-border input-neon",maxLength:1500},"ai-typing-".concat(Date.now())):(0,t.jsx)(w,{placeholder:"Message in ".concat((null==l?void 0:l.room_name)||"room","..."),value:i,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),W())},disabled:m||R>0,className:"bg-secondary border-border",maxLength:1500},"normal-input"),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[i.length,"/1500",i.length>1400&&(0,t.jsxs)("span",{className:"text-yellow-500 ml-2",children:[1500-i.length," characters remaining"]})]}),R>0&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Cooldown: ",R,"s"]})]})]}),(0,t.jsx)(y,{onClick:W,disabled:m||R>0||!i.trim(),size:"icon",children:(0,t.jsx)(eb.A,{className:"h-4 w-4"})})]})})]}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Welcome to Live Chat"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Select a room from the sidebar to start chatting"})]})})}var eS=a(1362);let eC=e=>{let{...s}=e,{theme:a="system"}=(0,eS.D)();return(0,t.jsx)(_.l$,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};function ek(){let[e,s]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!0),[l,n]=(0,r.useState)("685a64dcd94f6bbc0088f911"),[i,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s(!!localStorage.getItem("token")),o(!1)},[]);let c=e=>{n(e)},m=()=>{d(!0)};return a?(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"min-h-screen bg-background flex ".concat(e?"":"blur-sm"),children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(ec,{selectedRoom:l,onRoomSelect:c,onSettingsClick:m})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"md:hidden bg-card border-b border-border p-4 flex items-center justify-between",children:[(0,t.jsx)(ej,{selectedRoom:l,onRoomSelect:c,onSettingsClick:m}),(0,t.jsx)("h1",{className:"font-semibold",children:"Live Chat"}),(0,t.jsx)("div",{className:"w-10"})," "]}),(0,t.jsx)(ew,{selectedRoom:l})]})]}):(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Live Chat"}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Connect with friends and communities"})]})})}),(0,t.jsx)(E,{isOpen:!e,onClose:()=>{s(!0)}}),(0,t.jsx)(V,{isOpen:i,onClose:()=>{d(!1)}}),(0,t.jsx)(eC,{position:"top-right"})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(750)),_N_E=e.O()}]);